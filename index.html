<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshDesk Replica - Inicio</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üéØ Sistema de Soporte</h1>
        </header>

        <div class="login-container">
            <div class="login-card">
                <h2>Acceder al Sistema</h2>
                
                <div class="login-options">
                    <div class="login-option" onclick="redirectToClientPortal()">
                        <div class="option-icon">üë§</div>
                        <h3>Soy Cliente</h3>
                        <p>Solicitar soporte y ver mis tickets</p>
                        <button class="btn-primary">Acceder como Cliente</button>
                    </div>
                    
                    <div class="login-option" onclick="showAgentAuth()">
                        <div class="option-icon">üõ†Ô∏è</div>
                        <h3>Soy Agente</h3>
                        <p>Gestionar tickets y m√©tricas</p>
                        <button class="btn-secondary">Acceder como Agente</button>
                    </div>
                </div>

                <!-- Secci√≥n de Autenticaci√≥n para Agentes -->
                <div id="agent-auth-section" class="auth-section" style="display: none; margin-top: 2rem;">
                    <div class="auth-card">
                        <h3>Acceso para Agentes</h3>
                        <div class="auth-tabs">
                            <button class="tab-button active" onclick="openAgentTab('agent-login-tab')">Iniciar Sesi√≥n</button>
                            <button class="tab-button" onclick="openAgentTab('agent-register-tab')">Registrarse como Agente</button>
                        </div>

                        <!-- Login Agente -->
                        <div id="agent-login-tab" class="tab-content active">
                            <form id="agent-login-form">
                                <input type="email" id="agent-login-email" placeholder="Correo electr√≥nico" required>
                                <button type="submit" class="btn-primary">Acceder al Dashboard</button>
                            </form>
                        </div>

                        <!-- Registro Agente -->
                        <div id="agent-register-tab" class="tab-content">
                            <form id="agent-register-form">
                                <input type="text" id="agent-register-name" placeholder="Nombre completo" required>
                                <input type="email" id="agent-register-email" placeholder="Correo electr√≥nico" required>
                                <input type="tel" id="agent-register-phone" placeholder="WhatsApp" required>
                                <textarea id="agent-register-skills" placeholder="Especialidades o habilidades..." rows="3"></textarea>
                                <button type="submit" class="btn-primary">Registrarse como Agente</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="quick-links">
                    <a href="knowledge-base.html">üìö Base de Conocimiento</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function redirectToClientPortal() {
            window.location.href = 'client-portal.html';
        }

        function showAgentAuth() {
            document.getElementById('agent-auth-section').style.display = 'block';
        }

        function openAgentTab(tabName) {
            // Ocultar todos los tabs
            document.querySelectorAll('#agent-auth-section .tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#agent-auth-section .tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Mostrar tab seleccionado
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // Manejo de formularios de agentes
        document.addEventListener('DOMContentLoaded', function() {
            const agentLoginForm = document.getElementById('agent-login-form');
            const agentRegisterForm = document.getElementById('agent-register-form');

            if (agentLoginForm) {
                agentLoginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = document.getElementById('agent-login-email').value;
                    
                    // Verificar si el agente existe
                    const agents = JSON.parse(localStorage.getItem('agents')) || [];
                    const agent = agents.find(a => a.email === email && a.active);
                    
                    if (agent) {
                        localStorage.setItem('currentAgent', JSON.stringify(agent));
                        window.location.href = 'agent-dashboard.html';
                    } else {
                        alert('Agente no encontrado o cuenta inactiva');
                    }
                });
            }

            if (agentRegisterForm) {
                agentRegisterForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const name = document.getElementById('agent-register-name').value;
                    const email = document.getElementById('agent-register-email').value;
                    const phone = document.getElementById('agent-register-phone').value;
                    const skills = document.getElementById('agent-register-skills').value;
                    
                    // Registrar nuevo agente
                    const agents = JSON.parse(localStorage.getItem('agents')) || [];
                    
                    // Verificar si ya existe
                    if (agents.find(a => a.email === email)) {
                        alert('Este correo ya est√° registrado como agente');
                        return;
                    }
                    
                    const newAgent = {
                        id: 'agent_' + Date.now(),
                        name,
                        email,
                        phone,
                        skills,
                        registrationDate: new Date().toISOString(),
                        active: true,
                        role: 'agent'
                    };
                    
                    agents.push(newAgent);
                    localStorage.setItem('agents', JSON.stringify(agents));
                    
                    alert('Agente registrado exitosamente. Ahora puedes iniciar sesi√≥n.');
                    document.getElementById('agent-register-form').reset();
                    openAgentTab('agent-login-tab');
                });
            }
        });
    </script>
</body>
</html>
